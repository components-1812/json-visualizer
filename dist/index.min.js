(()=>{var z=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),M={HEX:{type:"hex",regex:/^#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,test(o=""){return this.regex.test(o)}},RGB:{type:"rgb",regex:/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,test(o=""){return this.regex.test(o)},validRange(o=""){let e=o.match(this.regex);if(!e)return!1;let[,t,s,n]=e,a=Number(t),i=Number(s),r=Number(n);return a>=0&&a<=255&&i>=0&&i<=255&&r>=0&&r<=255}},RGBA:{type:"rgba",regex:/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\s*\)$/i,test(o=""){return this.regex.test(o)},validRange(o=""){let e=o.match(this.regex);if(!e)return!1;let[,t,s,n,a]=e,i=Number(t),r=Number(s),l=Number(n),c=Number(a);return i>=0&&i<=255&&r>=0&&r<=255&&l>=0&&l<=255&&c>=0&&c<=1}},HSL:{type:"hsl",regex:/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,test(o=""){return this.regex.test(o)},validRange(o=""){let e=o.match(this.regex);if(!e)return!1;let[,t,s,n]=e,a=Number(t),i=Number(s),r=Number(n);return a>=0&&a<=360&&i>=0&&i<=100&&r>=0&&r<=100}},HSLA:{type:"hsla",regex:/^hsla\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*,\s*(0|1|0?\.\d+)\s*\)$/i,test(o=""){return this.regex.test(o)},validRange(o=""){let e=o.match(this.regex);if(!e)return!1;let[,t,s,n,a]=e,i=Number(t),r=Number(s),l=Number(n),c=Number(a);return i>=0&&i<=360&&r>=0&&r<=100&&l>=0&&l<=100&&c>=0&&c<=1}},NAMED_COLORS:{type:"named",test(o=""){return typeof CSS<"u"&&CSS.supports?CSS.supports("color",o):z.has(o.toLowerCase())}}};var j=M;var D={HTTP:{type:"http",regex:/^http:\/\/[^\s"'`<>()]+$/,test(o=""){return this.regex.test(o)}},HTTPS:{type:"https",regex:/^https:\/\/[^\s"'`<>()]+$/,test(o=""){return this.regex.test(o)}},FTP:{type:"ftp",regex:/^ftp:\/\/[^\s"'`<>()]+$/,test(o=""){return this.regex.test(o)}},WWW:{type:"www",regex:/^www\.[^\s"'`<>()]+$/,test(o=""){return this.regex.test(o)}},DOMAIN:{type:"domain",regex:/^[a-z0-9.-]+\.[a-z]{2,}(\/[^\s"'`<>()]*)?$/i,test(o=""){return this.regex.test(o)}},RELATIVE:{type:"relative",regex:/^(\.{1,2}\/|\/)[^\s"'`<>()]+$/,test(o=""){return this.regex.test(o)}},MAIL:{type:"mail",regex:/^(?:mailto:)?[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}(?:\?[^\s"'`<>()]+)?$/i,test(o=""){return this.regex.test(o)}},PHONE:{type:"phone",regex:/^(?:tel:)?\+?[\d\s-]*?(?:\(\d{1,4}\))?[\d\s-]{5,}$/,test(o=""){return this.regex.test(o)}}};var x=D;var N=class o{static version="0.0.3";static URL_PATTERNS=x;static COLOR_PATTERNS=j;tokens=[];constructor(){}tokenize(e,t={}){let{detectURL:s=!1,detectColor:n=!0,strict:a=!1}=t,i=this.clearJSON(e,{strict:a});this.tokens=[];let r=[],l="key",c=0,h=0,k=i.length;for(;c<i.length;){if(h++,h>k)throw new Error(`Infinite loop detected while tokenizing JSON. Check the input: ${i}`);let d=i[c],T=r.at(-1);if(d==="{"){r.push("{"),this.tokens.push({type:"brace-open",value:d,tags:["brace","open"]}),l="key",c++;continue}if(d==="}"){r.pop(),this.tokens.push({type:"brace-close",value:d,tags:["brace","close"]}),c++;continue}if(d==="["){r.push("["),this.tokens.push({type:"bracket-open",value:d,tags:["bracket","open"]}),l="array-value",c++;continue}if(d==="]"){r.pop(),this.tokens.push({type:"bracket-close",value:d,tags:["bracket","close"]}),c++;continue}if(d===","){this.tokens.push({type:"comma",value:d,tags:["comma"]}),l=T==="{"?"key":"array-value",c++;continue}if(d===":"){this.tokens.push({type:"colon",value:d,tags:["colon"]}),l="value",c++;continue}if(d==='"'){let p=this._parseString(i,c);if(p){let{value:g,endIndex:m}=p,y={type:"string",value:g,tags:["string",l]};if(s){let b=this._isURL(g);b.isURL&&(y.tags.push(`url-${b.type}`),y.url=b.type)}if(n){let b=this._isColor(g);b.isColor&&(y.tags.push(`color-${b.type}`),y.color=b.type)}this.tokens.push({type:"string-open",value:d,tags:["string","open",l]}),this.tokens.push(y),this.tokens.push({type:"string-close",value:d,tags:["string","close",l]}),c=m+1;continue}}if(d==="t"||d==="f"){let p=this._parseBoolean(i,c);if(p){let{value:g,endIndex:m}=p;this.tokens.push({type:"boolean",value:g,tags:["boolean",l,g?"true":"false"]}),c=m+1;continue}}if(d==="n"){let p=this._parseNull(i,c);if(p){let{value:g,endIndex:m}=p;this.tokens.push({type:"null",value:g,tags:["null",l]}),c=m+1;continue}}if(/[0-9\-]/.test(d)){let p=this._parseNumber(i,c);if(p){let{value:g,endIndex:m}=p;this.tokens.push({type:"number",value:g,tags:["number",l]}),c=m+1;continue}}let{value:R,endIndex:$}=this._parseUnknown(i,c);this.tokens.push({type:"unknown",value:R,tags:["unknown",l]}),c=$+1}}clearJSON(e,t={}){if(typeof e?.valueOf()!="string")throw new Error("Invalid JSON input. Expected a string.");let{strict:s="auto"}=t;if(s===!0)return JSON.stringify(JSON.parse(e));if(s===!1)return this._minifyJSON(e);if(s==="auto")try{return JSON.stringify(JSON.parse(e))}catch{return this._minifyJSON(e)}throw new Error("Invalid 'strict' option. Expected true, false, or 'auto'.")}_parseString(e,t){let s=t+1;for(;s<e.length;){if(e.at(s)==="\\"){s+=2;continue}if(e.at(s)==='"')break;s++}let n=s,a=e.slice(t,n+1);try{return{value:JSON.parse(a),raw:a,endIndex:n}}catch{return null}}_parseNumber(e,t){let s=t;for(;s<e.length&&!this._isDelimiter(e[s]);)s++;let n=e.slice(t,s),a=Number(n);return Number.isNaN(a)?null:{value:a,raw:n,endIndex:s-1}}_parseBoolean(e,t){return e.startsWith("true",t)&&this._isDelimiter(e[t+4])?{value:!0,raw:"true",endIndex:t+3}:e.startsWith("false",t)&&this._isDelimiter(e[t+5])?{value:!1,raw:"false",endIndex:t+4}:null}_parseNull(e,t){return e.startsWith("null",t)&&this._isDelimiter(e[t+4])?{value:null,raw:"null",endIndex:t+3}:null}_parseUnknown(e,t){let s=t,n=[];for(;s<e.length&&!this._isDelimiter(e[s]);)n.push(e[s]),s++;return{value:n.join(""),raw:n.join(""),endIndex:s-1}}_isDelimiter(e=""){return e===","||e==="}"||e==="]"}_isURL(e=""){if(!e)return{isURL:!1,type:null};if(typeof e!="string")return{isURL:!1,type:null};for(let t of Object.values(o.URL_PATTERNS))if(t.test(e))return{isURL:!0,type:t.type};return{isURL:!1,type:null}}_isColor(e=""){if(!e)return{isColor:!1,type:null};if(typeof e!="string")return{isColor:!1,type:null};for(let t of Object.values(o.COLOR_PATTERNS))if(t.test(e))return t.validRange&&!t.validRange(e)?{isColor:!1,type:null}:{isColor:!0,type:t.type};return{isColor:!1,type:null}}_minifyJSON(e){if(typeof e?.valueOf()!="string")throw new Error("Invalid JSON input. Expected a string.");if(e.length===0)return"";let t=[],s=!1,n=!1,a=e.length;for(let i=0;i<a;i++){let r=e[i];s?(t.push(r),n?n=!1:(r==="\\"&&(n=!0),r==='"'&&(s=!1))):(r!==" "&&r!==`
`&&r!=="	"&&r!=="\r"&&t.push(r),r==='"'&&(s=!0))}return t.join("")}},L=N;var S=class extends HTMLElement{static VERSION="0.0.3";static DEFAULT_TAG_NAME="custom-json-visualizer";static DEFAULT_ICONS={toggle:'<svg data-name=toggle width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path fill-rule=evenodd d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/></svg>',copy:'<svg data-name=copy width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/></svg>',"copy-done":'<svg data-name=copy-done width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"/></svg>'};static define(e=this.DEFAULT_TAG_NAME,t={}){if(window.customElements.get(e))console.warn(`Custom element with tag name "${e}" is already defined.`);else{let{links:s,adopted:n,raw:a}=t;Array.isArray(s)&&this.stylesSheets.links.push(...s),Array.isArray(n)&&this.stylesSheets.adopted.push(...n),Array.isArray(a)&&this.stylesSheets.raw.push(...a),window.customElements.define(e,this)}}static stylesSheets={links:[],adopted:[],raw:[]};applyStylesSheets(e=this.constructor.stylesSheets){let{links:t,adopted:s,raw:n}=e,a=document.createDocumentFragment(),i=t.map(r=>{let l=document.createElement("link");l.rel="stylesheet",l.href=r;let{promise:c,resolve:h,reject:k}=Promise.withResolvers();return l.sheet?h({link:l,href:r,status:"loaded"}):(l.addEventListener("load",()=>h({link:l,href:r,status:"loaded"})),l.addEventListener("error",()=>k({link:l,href:r,status:"error"}))),a.prepend(l),c});Promise.allSettled(i).then(r=>{this.dispatchEvent(new CustomEvent("ready-links",{detail:{results:r.map(l=>l.value||l.reason)}})),this.setAttribute("ready-links","")}),n.forEach(r=>{let l=document.createElement("style");l.textContent=r,a.prepend(l)}),this.shadowRoot.prepend(a),this.shadowRoot.adoptedStyleSheets=[...this.shadowRoot.adoptedStyleSheets,...s]}static defaultTokenizer=async(e,t={})=>{let s=new L;return s.tokenize(e,t),s.tokens};static getTokens=this.defaultTokenizer;static defaults={renderDeep:1/0,colors:new Set(["hex","rgb","rgba","hsl","hsla","named"]),urls:new Set(["http","https","ftp","www","domain","relative","mail","phone"]),foldedMessage:"\u22EF",strict:"auto"};constructor(){super(),this.attachShadow({mode:"open"})}set lineNumbers(e){!e||e==="none"?this.setAttribute("line-numbers","none"):this.removeAttribute("line-numbers")}get lineNumbers(){return this.getAttribute("line-numbers")!=="none"}set toggleLines(e){!e||e==="none"?this.setAttribute("toggle-lines","none"):this.removeAttribute("toggle-lines")}get toggleLines(){return this.getAttribute("toggle-lines")!=="none"}set indentationGuidesLines(e){!e||e==="none"?this.setAttribute("indentation-guides-lines","none"):this.removeAttribute("indentation-guides-lines")}get indentationGuidesLines(){return this.getAttribute("indentation-guides-lines")!=="none"}set copyButton(e){!e||e==="none"?this.setAttribute("copy-button","none"):this.removeAttribute("copy-button")}get copyButton(){return this.getAttribute("copy-button")!=="none"}set renderDeep(e){e?this.setAttribute("render-deep",e):this.removeAttribute("render-deep")}get renderDeep(){let e=this.getAttribute("render-deep");return!e||Number.isNaN(Number(e))?this.constructor.defaults.renderDeep:Number(e)}set foldedMessage(e){e?this.setAttribute("folded-message",e):this.removeAttribute("folded-message")}get foldedMessage(){return this.getAttribute("folded-message")??this.constructor.defaults.foldedMessage}set colors(e){if(e==null)return this.removeAttribute("colors");if(typeof e=="string"&&this.setAttribute("colors",e),Array.isArray(e)||e instanceof Set){let t=this.constructor.defaults.colors,s=[...e].map(n=>n.trim()).filter(n=>t.has(n));return this.setAttribute("colors",s.join(","))}}get colors(){let e=this.getAttribute("colors");return!e||e==="all"?this.constructor.defaults.colors:e==="none"?new Set:new Set(e.split(",").map(t=>t.trim()).filter(t=>this.constructor.defaults.colors.has(t)))}set urls(e){if(e==null)return this.removeAttribute("urls");if(typeof e=="string"&&this.setAttribute("urls",e),Array.isArray(e)||e instanceof Set){let t=this.constructor.defaults.urls,s=[...e].map(n=>n.trim()).filter(n=>t.has(n));return this.setAttribute("urls",s.join(","))}}get urls(){let e=this.getAttribute("urls");return!e||e==="all"?this.constructor.defaults.urls:e==="none"?new Set:new Set(e.split(",").map(t=>t.trim()).filter(t=>this.constructor.defaults.urls.has(t)))}set strict(e){e?this.setAttribute("strict",e):this.removeAttribute("strict")}get strict(){let e=this.getAttribute("strict")?.toLowerCase();return!e&&this.hasAttribute("strict")?!0:e==="none"||e==="false"?!1:e==="true"?!0:this.constructor.defaults.strict}set src(e){typeof e=="string"?this.setAttribute("src",e):this.removeAttribute("src")}get src(){return this.getAttribute("src")}set json(e){if(e==null)this.removeAttribute("json");else if(typeof e=="string")try{let t=JSON.stringify(JSON.parse(e));this.setAttribute("json",t)}catch{this.setAttribute("json",e)}else if(typeof e=="object")this.setAttribute("json",JSON.stringify(e));else throw new TypeError("json must be a string or object")}get json(){return this.getAttribute("json")}};var O=S;var u=class o{static className="json-line";static showNumber=!0;static showToggle=!0;static showColors=!0;static showURLs=!0;static colors=new Set(["hex","rgb","rgba","hsl","hsla","named"]);static urls=new Set(["http","https","ftp","relative","mail","phone"]);static toggleIcon=()=>document.createTextNode("v");#e=null;tokens=[];parent=null;#t=null;isOpenBlock=!1;isCloseBlock=!1;constructor(e={}){let{level:t,number:s,toggleActive:n=!1}=e;this.level=t,this.number=s,this.toggleActive=n}render(){this.#e&&this.dispose();let e=document.createElement("div");e.classList.add(o.className),e.setAttribute("level",this.level),e.style.setProperty("--level",this.level),e.setAttribute("number",this.number),e.style.setProperty("--number",this.number),o.showNumber&&e.append(this.#i()),o.showToggle&&this.isOpenBlock&&e.append(this.#l());let t=document.createElement("div");t.classList.add(`${o.className}-content`);for(let s=0;s<this.tokens.length;s++)t.append(this.#s(this.tokens.at(s)));return e.append(t),this.#e=e,e}#s(e={}){let{type:t,value:s,tags:n=[]}=e,a=document.createElement("span");return a.classList.add(`${o.className}-token`,t),a.setAttribute("tags",n.join(" ")),o.showURLs&&e.url&&o.urls.has(e.url)?a.append(this.#n(e)):o.showColors&&e.color&&o.colors.has(e.color)?a.append(this.#o(e)):a.textContent=String(s),a}#n(e={}){let t=document.createElement("a");t.classList.add(`${o.className}-url`);let s=String(e.value);return t.href=e.url==="domain"||e.url==="www"?`https://${s}`:e.url==="mail"&&!s.startsWith("mailto:")?`mailto:${s}`:e.url==="phone"&&!s.startsWith("tel:")?`tel:${s}`:s,e.url!=="relative"&&(t.target="_blank",t.rel="noopener noreferrer"),t.textContent=s,t}#o(e={}){let t=document.createDocumentFragment(),s=document.createElement("span");return s.classList.add(`${o.className}-color-preview`),s.style.backgroundColor=e.value,t.append(s,String(e.value)),t}#i(){let e=document.createElement("span");return e.classList.add(`${o.className}-number`),e.textContent=this.number,e}#l(){let e=document.createElement("button");e.classList.add(`${o.className}-toggle-button`),e.classList.toggle("active",this.toggleActive);let t=document.createElement("span");return t.classList.add(`${o.className}-toggle-icon`),t.append(o.toggleIcon()),e.append(t),e.addEventListener("click",this.#r),this.#t=e,e}#r=e=>{this.toggleActive=!this.toggleActive,e.currentTarget.classList.toggle("active"),this.node.dispatchEvent(new CustomEvent("toggle-lines",{detail:{line:this},bubbles:!0,composed:!0}))};dispose(){this.#t?.removeEventListener("click",this.#r),this.#t=null,this.#e?.remove(),this.#e=null}addToken(e={}){this.isOpenBlock||(this.isOpenBlock=e.type==="brace-open"||e.type==="bracket-open"),this.isCloseBlock||(this.isCloseBlock=e.type==="brace-close"||e.type==="bracket-close"),this.tokens.push(e)}get node(){return this.#e}};var f=class o{static className="json-block";static showFoldedMessage=!0;static foldedMessage="...";static foldedMessageVars={"{content_length}":e=>e.content.length};#e=null;parent=null;content=[];constructor(e={}){let{level:t=0,showContent:s=!0,folded:n=!1}=e;this.level=t,this.showContent=s,this.folded=n}render(){this.#e&&this.dispose();let e=document.createElement("div");if(e.classList.add(o.className),e.setAttribute("level",this.level),e.style.setProperty("--level",this.level),e.toggleAttribute("folded",this.folded),o.showFoldedMessage){let t=o.foldedMessage;for(let s in o.foldedMessageVars)t=t.replace(s,o.foldedMessageVars[s](this));e.style.setProperty("--json-folded-message-content",`'${t}'`)}if(this.content.length>0){e.append(this.content.at(0).render());let t=document.createElement("div");if(t.classList.add(`${o.className}-content`),this.showContent)for(let s=1;s<this.content.length-1;s++)t.append(this.content.at(s).render());e.append(t),e.append(this.content.at(-1).render())}return this.#e=e,e}renderContent(){this.showContent=!0;let e=document.createDocumentFragment();for(let t=1;t<this.content.length-1;t++)e.append(this.content.at(t).render());this.node?.querySelector(`.${o.className}-content`).append(e)}append(e){e.parent=this,this.content.push(e)}fold(){this.folded=!0,this.node?.toggleAttribute("folded",this.folded)}unfold(){this.folded=!1,this.node?.toggleAttribute("folded",this.folded)}toggle(e){e!=null?this.folded=e:this.folded=!this.folded,this.node?.toggleAttribute("folded",this.folded)}dispose(){for(let e=0;e<this.content.length;e++)this.content.at(e).dispose();this.#e?.remove(),this.#e=null,this.showContent=!1,this.content=[],this.folded=!1,this.parent=null}get node(){return this.#e}};var v=class o{static className="copy-button";static icons={copy:()=>document.createTextNode("Copy"),copyDone:()=>document.createTextNode("Done")};static showDoneTimeout=1e3;#e=null;constructor(e={}){let{data:t=null}=e;this.data=t}render(){this.#e=document.createElement("button"),this.#e.classList.add(o.className);let e=document.createElement("div");e.classList.add("copy-icon"),e.append(o.icons.copy());let t=document.createElement("div");return t.classList.add("copy-done-icon"),t.append(o.icons.copyDone()),this.#e.append(e,t),this.#e.addEventListener("click",this.#t),this.#e}#t=e=>{let t=typeof this.data=="function"?this.data():this.data?.current;if(t){let s=e.currentTarget;navigator.clipboard.writeText(typeof t=="string"?t:JSON.stringify(t,null,2)).then(()=>{s.setAttribute("copy-done",""),s.disabled=!0,setTimeout(()=>{s.removeAttribute("copy-done"),s.disabled=!1},o.showDoneTimeout),s.dispatchEvent(new CustomEvent("copy-done",{detail:{data:t},bubbles:!0,composed:!0})),console.log("JSON copied to clipboard")}).catch(n=>{console.error("Failed to copy JSON:",n)})}};dispose(){this.#e?.removeEventListener("click",this.#t),this.#e?.remove(),this.#e=null}get node(){return this.#e}};var A=class o extends O{#e=null;#t=null;#s=null;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<div class=JSONVisualizer></div><slot name=icons><template>${o.DEFAULT_ICONS.toggle} ${o.DEFAULT_ICONS.copy} ${o.DEFAULT_ICONS["copy-done"]}</template></slot>`,this.applyStylesSheets()}static observedAttributes=["json","src","line-numbers","toggle-lines","folded-message"];attributeChangedCallback(e,t,s){t===s||!this.hasAttribute("ready")||(e==="src"&&this.loadJSON(this.src),e==="json"&&this.renderJSON(this.json),["line-numbers","toggle-lines","folded-message"].includes(e)&&this.isConnected&&this.updateJSON())}connectedCallback(){this.copyButton!=="none"&&(v.icons={copy:()=>this.getIcon("copy",{clone:!0}),copyDone:()=>this.getIcon("copy-done",{clone:!0})},this.#s=new v({data:()=>this.data?.raw}),this.shadowRoot.append(this.#s.render())),this.addEventListener("toggle-lines",this.#o),this.src?this.loadJSON(this.src):this.renderJSON(this.json??this.textContent),this.dispatchEvent(new CustomEvent("ready")),this.setAttribute("ready","")}disconnectedCallback(){this.#s?.dispose(),this.#s=null,this.clearJSON(),this.clearListeners(),this.removeAttribute("ready"),this.removeAttribute("ready-json")}async loadJSON(e,t={}){let{method:s}=t;try{let n=await fetch(e,{method:s||"GET"});if(n.ok){let a=await n.json();this.renderJSON(a)}}catch{}}async#n(e=[]){let t=[],s=null,n=1,a=0;for(let i=0;i<e.length;i++){let r=e.at(i);if(r.type==="brace-close"||r.type==="bracket-close"){a--;let l=e.at(i-1);["brace-open","bracket-open","comma"].includes(l?.type)||(s=null)}if(s||(s=new u({level:a,number:n++}),t.push(s)),s.addToken(r),r.type==="brace-close"||r.type==="bracket-close"){let l=e.at(i+1);if(l?.type==="comma"){s.addToken(l),s=null,i++;continue}}(r.type==="brace-open"||r.type==="bracket-open")&&a++,["brace-open","brace-close","bracket-open","bracket-close","comma"].includes(r.type)&&(s=null)}return t}async renderJSON(e){if(typeof e!="string"&&typeof e!="object")throw new Error("No JSON provided to renderJSON method.");console.log("render json"),this.removeAttribute("ready-json");let t=null,s=null;if(typeof e=="string"){t=e;try{s=JSON.parse(e)}catch{}}else s=e,t=JSON.stringify(e);u.showNumber=this.lineNumbers,u.showToggle=this.toggleLines,u.showColors=this.colors.size>0,u.showURLs=this.urls.size>0,u.colors=this.colors,u.urls=this.urls,u.toggleIcon=()=>this.getIcon("toggle",{clone:!0}),f.showFoldedMessage=this.foldedMessage!=="none",f.foldedMessage=this.foldedMessage,this.#t&&this.clearJSON();let n=await(o.getTokens??o.defaultTokenizer).call(this,t,{detectColor:this.colors.size>0,detectURL:this.urls.size>0,strict:this.strict}),a=await this.#n(n),i=[],r=null;for(let l=0;l<a.length;l++){let c=a.at(l);if(c.isOpenBlock){let h=new f({level:c.level,showContent:c.level<this.renderDeep});h.append(c),h.folded=!h.showContent,c.toggleActive=!h.showContent,i.push(h);continue}if(c.isCloseBlock){let h=i.pop();h.append(c),i.length>0?i.at(-1).append(h):r=h;continue}i.at(-1)?.append(c)}if(!r&&i.length>0){for(;i.length>1;){let l=i.pop();i.at(-1).append(l)}r=i.at(0)}if(this.shadowRoot.querySelector(".JSONVisualizer").append(r.render()),this.lineNumbers){let l=`${String(a.length).length}ch`;this.shadowRoot.querySelector(".JSONVisualizer").style.setProperty("--line-number-min-width",l)}this.#t=r,this.#e={raw:t,parsed:s},this.setAttribute("ready-json",""),this.dispatchEvent(new CustomEvent("ready-json"))}updateJSON(){if(!this.getAttribute("ready-json"))throw new Error("JSON not rendered yet.");console.log("update json"),this.removeAttribute("ready-json"),this.#t.dispose(),u.showNumber=this.lineNumbers,u.showToggle=this.toggleLines,u.showColors=this.colors.size>0,u.showURLs=this.urls.size>0,u.colors=this.colors,u.urls=this.urls,u.toggleIcon=()=>this.getIcon("toggle",{clone:!0}),f.showFoldedMessage=this.foldedMessage!=="none",f.foldedMessage=this.foldedMessage,this.shadowRoot.querySelector(".JSONVisualizer").append(this.rootBlock.render())}clearJSON(){this.removeAttribute("ready-json"),this.#t?.dispose(),this.#t=null}getIcon(e,{clone:t=!1}={}){let s=this.shadowRoot.querySelector("slot[name='icons']"),n=s.querySelector("template").content,i=s.assignedNodes().at(0)?.content?.querySelector(`[data-name='${e}']`)??n.querySelector(`[data-name='${e}']`);return t?i.cloneNode(!0):i}clearListeners(){this.removeEventListener("toggle-lines",this.#o)}#o=e=>{let{line:t}=e.detail,s=t.parent;!s||!(s instanceof f)||(console.log("toggle lines"),s.showContent?s.folded?s.unfold():s.fold():(s.renderContent(),s.folded&&t.block.unfold()))};get data(){return this.#e}};var w=A;var C=`:host{display:inline-block;margin:0;padding:0;vertical-align:middle;width:fit-content;height:fit-content;min-width:100%;min-height:100%;position:relative;--line-height: 1.25;--line-elements-gap: 5px;--line-white-space: normal;--font: Consolas, "Courier New", monospace, sans-serif;--line-number-padding: 5px;--line-number-color: #777;--line-number-background: transparent;--line-number-text-align: right;--line-number-width: fit-content;--line-number-min-width: 2ch;--toggle-button-width: 15px;--toggle-button-color: #777;--toggle-button-hover-color: #fff;--toggle-button-padding: 0;--copy-button-width: 40px;--copy-button-height: 40px;--copy-button-color: #777;--copy-button-hover-color: #fff;--copy-button-padding: 10px;--indentation-guides-lines-color: #444;--indentation-guides-lines-width: 1px;--scrollbar-color: #555 #2a2a2a;--json-tab-size: 4ch;--json-background: #222;--json-foreground: #eee;--json-key: #9cdcfe;--json-string: #ce9178;--json-number: #b5cea8;--json-boolean: #569cd6;--json-null: #dcdcaa;--json-brace: #ffd700;--json-bracket: #ffd700;--json-comma: #d4d4d4;--json-colon: #d4d4d4;--json-unknownn: #f44747;--json-folded-message-content: unset;--json-folded-message-color: #777;--json-url-color: inherit;--json-url-visited-color: inherit;--json-url-hover-color: inherit;--json-url-text-decoration: underline;--json-preview-color-width: .7em;--json-preview-color-height: .7em;--json-preview-color-border: 1px solid #ffffff;--json-preview-color-margin: 0 .25em;background-color:var(--json-background);color:var(--json-foreground);font-family:var(--font);line-height:var(--line-height)}:host .JSONVisualizer{.json-line{display:flex;gap:var(--line-elements-gap);.json-line-number{min-width:var(--line-number-min-width);width:var(--line-number-width);flex-grow:0;flex-shrink:0;padding-inline:var(--line-number-padding);color:var(--line-number-color);background-color:var(--line-number-background);text-align:var(--line-number-text-align);user-select:none}.json-line-toggle-button{display:block;flex-grow:0;flex-shrink:0;width:var(--toggle-button-width);margin:0;padding:var(--toggle-button-padding);background:transparent;border:none;color:var(--toggle-button-color);.json-line-toggle-icon,.json-line-toggle-icon svg{display:block;width:100%;height:100%}&.active .json-line-toggle-icon{rotate:-90deg}&:hover{color:var(--toggle-button-hover-color)}}.json-line-content{flex-grow:1;flex-shrink:1;--total-tab-size: calc(var(--level, 0) * var(--json-tab-size, 20px));padding-left:var(--total-tab-size);white-space:var(--line-white-space);background-image:repeating-linear-gradient(to right,var(--indentation-guides-lines-color) 0,var(--indentation-guides-lines-color) var(--indentation-guides-lines-width),transparent var(--indentation-guides-lines-width),transparent var(--json-tab-size, 20px));background-size:round(down,var(--total-tab-size),1px) 100%;background-repeat:no-repeat;background-position:0 0;.json-line-url{color:var(--json-url-color);text-decoration:var(--json-url-text-decoration);&:visited{color:var(--json-url-visited-color)}&:hover{color:var(--json-url-hover-color)}}.json-line-color-preview{display:inline-block;width:var(--json-preview-color-width);height:var(--json-preview-color-height);border:var(--json-preview-color-border);margin:var(--json-preview-color-margin)}}&:not(:has(.json-line-toggle-button)) .json-line-content{margin-left:calc(var(--toggle-button-width) + var(--line-elements-gap))}}.json-block[folded] .json-block-content{display:none}.json-block[folded] .json-line:first-child .json-line-content span:last-child:after{display:inline-block;content:var(--json-folded-message-content, "\\22ef");color:var(--json-folded-message-color);margin:.1em .2em 0;line-height:1em}span[tags~=brace]{color:var(--json-brace)}span[tags~=bracket]{color:var(--json-bracket)}span[tags~=string]{color:var(--json-string)}span[tags~=key]{color:var(--json-key)}span[tags~=number]{color:var(--json-number)}span[tags~=boolean]{color:var(--json-boolean)}span[tags~=null]{color:var(--json-null)}span[tags~=comma]{color:var(--json-comma)}span[tags~=colon]{color:var(--json-colon);padding-right:1ch}span[tags~=unknown]{color:var(--json-unknownn)}}:host([line-numbers="none"]) .JSONVisualizer .json-line .json-line-number{display:none}:host([toggle-lines="none"]) .JSONVisualizer .json-line{.json-line-toggle-button{display:none}.json-line-content{margin-left:0}}:host([indentation-guides-lines="none"]) .JSONVisualizer .json-line .json-line-content{background-image:none}:host([folded-message="none"]) .JSONVisualizer .json-block[folded] .json-line:first-child .json-line-content span:last-child:after{display:none}:host .copy-button{display:grid;grid-template-columns:1fr;grid-template-rows:1fr;position:absolute;top:0;right:0;background:transparent;border:none;padding:var(--copy-button-padding);width:var(--copy-button-width);height:var(--copy-button-height);color:var(--copy-button-color);.copy-icon,.copy-icon svg,.copy-done-icon,.copy-done-icon svg{display:block;width:100%;height:100%}.copy-icon,.copy-done-icon{grid-row:1;grid-column:1}&:not([copy-done]) .copy-done-icon{display:none}&[copy-done] .copy-icon{display:none}&:hover{color:var(--copy-button-hover-color)}}:host([copy-button="none"]) .copy-button{display:none}:host(.contain){width:100%;height:100%;.JSONVisualizer{width:100%;height:100%;overflow:auto;scrollbar-width:thin;scrollbar-color:var(--scrollbar-color)}.copy-button{right:10px}}
`;var E=new CSSStyleSheet;E.replaceSync(C);w.define(w.DEFAULT_TAG_NAME,{adopted:[E]});var te=w;})();
